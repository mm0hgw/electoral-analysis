
require(gsubfn)

europe_dir <- "~/git/COVID-19/data/cases/europe/europe_situation_updates"

crunch.dir <- function(d){
	fl <- list.files(d,full.names=TRUE)
	fd <- as.Date(strapplyc(fl,"\\d+-\\d+-\\d+",simplify=TRUE))
	ft <- do.call(rbind,lapply(seq_along(fl),function(x){
		cbind(fd[x],read.csv(fl[x])
}))
	fco <- sort(unique(ft[,2]))
	out<-lapply(fco,function(x){
	ft[ft[,2]==x,-2]
})
	out
}
